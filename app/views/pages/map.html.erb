<div id="map" style="width: 100%; height: calc(100vh - 70px);"></div>

<% content_for(:after_js) do %>
<script>
  var directionsDisplay;
  var directionsService = new google.maps.DirectionsService();
  var map;

function initialize() {
  directionsDisplay = new google.maps.DirectionsRenderer();
  var nation = new google.maps.LatLng(48.8483900,2.3959210);
  var mapOptions = {
    // zoom:14,
    center: nation
  }
  map = new google.maps.Map(document.getElementById("map"), mapOptions);
  directionsDisplay.setMap(map);
}

function calcRoute() {
  var start = new google.maps.LatLng(48.8648480,2.3798530);
  var end = new google.maps.LatLng(48.8477590,2.4394970);
  var waypts = []
  var w = {
    location: new google.maps.LatLng(48.8634290,2.4088360),
    stopover: true
  }
  waypts.push(w);
  var request = {
    origin:start,
    destination:end,
    waypoints: waypts,
    optimizeWaypoints: true,
    travelMode: google.maps.TravelMode.DRIVING
  };
  directionsService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(result);
    }
  });
}

 $(document).ready(function() {
  initialize();
  calcRoute();
  });

  </script>
  <% end %>
